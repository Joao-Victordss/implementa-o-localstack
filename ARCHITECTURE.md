# ğŸ—ï¸ Arquitetura do Sistema

## VisÃ£o Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        NAVEGADOR                             â”‚
â”‚                     (localhost:3000)                         â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  Login   â”‚  â”‚  Registro â”‚  â”‚  Dashboard   â”‚            â”‚
â”‚  â”‚  Page    â”‚  â”‚   Page    â”‚  â”‚     Page     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚              â”‚                â”‚                     â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                      â”‚                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚              â”‚  API Service   â”‚                            â”‚
â”‚              â”‚  (axios)       â”‚                            â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTP/JSON
                       â”‚ Authorization: Bearer {JWT}
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BACKEND (NestJS)                          â”‚
â”‚                  (localhost:3001)                           â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Auth Module                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚   Auth     â”‚  â”‚   JWT    â”‚  â”‚  Passport â”‚       â”‚  â”‚
â”‚  â”‚  â”‚ Controller â”‚  â”‚ Strategy â”‚  â”‚  Guards   â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚        â”‚              â”‚              â”‚              â”‚  â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                      â”‚                               â”‚  â”‚
â”‚  â”‚               â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                       â”‚  â”‚
â”‚  â”‚               â”‚ Auth Service â”‚                       â”‚  â”‚
â”‚  â”‚               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Files Module                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                               â”‚  â”‚
â”‚  â”‚  â”‚    Files     â”‚   â”‚                               â”‚  â”‚
â”‚  â”‚  â”‚  Controller  â”‚   â”‚                               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                               â”‚  â”‚
â”‚  â”‚         â”‚           â”‚                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”   â”‚                               â”‚  â”‚
â”‚  â”‚  â”‚ Files Serviceâ”‚   â”‚                               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚           â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                AWS Module (Global)                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚  â”‚  S3 Service  â”‚         â”‚  DynamoDB    â”‚          â”‚  â”‚
â”‚  â”‚  â”‚              â”‚         â”‚   Service    â”‚          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                        â”‚
             â”‚ AWS SDK v3             â”‚ AWS SDK v3
             â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LOCALSTACK (Docker)                      â”‚
â”‚                    (localhost:4566)                        â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚        S3        â”‚         â”‚     DynamoDB     â”‚       â”‚
â”‚  â”‚                  â”‚         â”‚                  â”‚       â”‚
â”‚  â”‚  my-app-bucket/  â”‚         â”‚  Tabela: users   â”‚       â”‚
â”‚  â”‚  â”œâ”€ userId1/     â”‚         â”‚  â”œâ”€ id (PK)      â”‚       â”‚
â”‚  â”‚  â”‚  â”œâ”€ file1.jpg â”‚         â”‚  â”œâ”€ email (GSI)  â”‚       â”‚
â”‚  â”‚  â”‚  â””â”€ file2.pdf â”‚         â”‚  â”œâ”€ name         â”‚       â”‚
â”‚  â”‚  â””â”€ userId2/     â”‚         â”‚  â”œâ”€ password     â”‚       â”‚
â”‚  â”‚     â””â”€ file3.png â”‚         â”‚  â””â”€ createdAt    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Fluxo de Registro

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚                                                â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                                          â”‚
     â”‚ 1. UsuÃ¡rio preenche formulÃ¡rio                          â”‚
     â”‚    (nome, email, senha)                                 â”‚
     â”‚                                                          â”‚
     â”‚ 2. POST /auth/register                                  â”‚
     â”‚    {name, email, password}                              â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                                          â”‚
     â”‚                                         3. AuthService  â”‚
     â”‚                                            .register()   â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         4. Verifica se   â”‚
     â”‚                                            email existe  â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚
     â”‚                                         â”‚  DynamoDB    â”‚ â”‚
     â”‚                                         â”‚  findByEmail â”‚ â”‚
     â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         5. Hash senha    â”‚
     â”‚                                            bcrypt.hash() â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         6. Cria usuÃ¡rio  â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚
     â”‚                                         â”‚  DynamoDB    â”‚ â”‚
     â”‚                                         â”‚   putItem    â”‚ â”‚
     â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         7. Gera JWT      â”‚
     â”‚                                            token         â”‚
     â”‚                                                 â”‚        â”‚
     â”‚ 8. Retorna {user, token}                       â”‚        â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                                          â”‚
     â”‚ 9. Armazena token e user                                â”‚
     â”‚    no localStorage                                       â”‚
     â”‚                                                          â”‚
     â”‚ 10. Redireciona para /dashboard                         â”‚
     â”‚                                                          â”‚
```

---

## Fluxo de Login

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚                                                â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                                          â”‚
     â”‚ 1. UsuÃ¡rio preenche formulÃ¡rio                          â”‚
     â”‚    (email, senha)                                       â”‚
     â”‚                                                          â”‚
     â”‚ 2. POST /auth/login                                     â”‚
     â”‚    {email, password}                                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                                          â”‚
     â”‚                                         3. AuthService  â”‚
     â”‚                                            .login()      â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         4. Busca usuÃ¡rio â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚
     â”‚                                         â”‚  DynamoDB    â”‚ â”‚
     â”‚                                         â”‚  findByEmail â”‚ â”‚
     â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         5. Verifica senhaâ”‚
     â”‚                                            bcrypt.compareâ”‚
     â”‚                                                 â”‚        â”‚
     â”‚                                         6. Gera JWT      â”‚
     â”‚                                            token         â”‚
     â”‚                                                 â”‚        â”‚
     â”‚ 7. Retorna {user, token}                       â”‚        â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                                          â”‚
     â”‚ 8. Armazena token e user                                â”‚
     â”‚    no localStorage                                       â”‚
     â”‚                                                          â”‚
     â”‚ 9. Redireciona para /dashboard                          â”‚
     â”‚                                                          â”‚
```

---

## Fluxo de Upload

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚                                     â”‚ Backend  â”‚        â”‚   S3   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                               â”‚                  â”‚
     â”‚ 1. UsuÃ¡rio seleciona arquivo                 â”‚                  â”‚
     â”‚                                               â”‚                  â”‚
     â”‚ 2. POST /files/upload                        â”‚                  â”‚
     â”‚    Authorization: Bearer {JWT}               â”‚                  â”‚
     â”‚    Content-Type: multipart/form-data         â”‚                  â”‚
     â”‚    Body: FormData com file                   â”‚                  â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  3. JwtGuard verifica token     â”‚
     â”‚                                     Extrai userId do JWT        â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  4. FilesService.uploadFile()   â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  5. S3Service.uploadFile()      â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  6. Gera key:                   â”‚
     â”‚                                     {userId}/{timestamp}-{name} â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  7. PutObjectCommand            â”‚
     â”‚                                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                               â”‚  8. Armazena    â”‚
     â”‚                                               â”‚     arquivo      â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                               â”‚                  â”‚
     â”‚ 9. Retorna {message, key, metadata}          â”‚                  â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
     â”‚                                               â”‚                  â”‚
     â”‚ 10. Atualiza lista de arquivos               â”‚                  â”‚
     â”‚                                               â”‚                  â”‚
```

---

## Fluxo de Download

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser â”‚                                     â”‚ Backend  â”‚        â”‚   S3   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                               â”‚                  â”‚
     â”‚ 1. UsuÃ¡rio clica em "Download"               â”‚                  â”‚
     â”‚                                               â”‚                  â”‚
     â”‚ 2. GET /files/download/{key}                 â”‚                  â”‚
     â”‚    Authorization: Bearer {JWT}               â”‚                  â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  3. JwtGuard verifica token     â”‚
     â”‚                                     Extrai userId                â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  4. Verifica se key pertence    â”‚
     â”‚                                     ao userId (seguranÃ§a)        â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  5. S3Service.getFile(key)      â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                  6. GetObjectCommand            â”‚
     â”‚                                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                                               â”‚                  â”‚
     â”‚                                               â”‚  7. Retorna     â”‚
     â”‚                                               â”‚     stream       â”‚
     â”‚                                               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                                               â”‚                  â”‚
     â”‚                                  8. Converte stream para Buffer â”‚
     â”‚                                               â”‚                  â”‚
     â”‚ 9. Response com arquivo (blob)               â”‚                  â”‚
     â”‚    Content-Type: application/octet-stream    â”‚                  â”‚
     â”‚    Content-Disposition: attachment           â”‚                  â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
     â”‚                                               â”‚                  â”‚
     â”‚ 10. Navegador baixa arquivo                  â”‚                  â”‚
     â”‚                                               â”‚                  â”‚
```

---

## Estrutura de Dados

### DynamoDB - Tabela `users`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Tabela: users                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Partition Key: id (String - UUID v4)                   â”‚
â”‚                                                         â”‚
â”‚  Global Secondary Index: EmailIndex                     â”‚
â”‚  â””â”€ Key: email (String)                                 â”‚
â”‚                                                         â”‚
â”‚  Atributos:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Campo    â”‚      Tipo        â”‚   Exemplo         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ id        â”‚ String (UUID)    â”‚ 550e8400-e29b...  â”‚  â”‚
â”‚  â”‚ name      â”‚ String           â”‚ JoÃ£o Silva        â”‚  â”‚
â”‚  â”‚ email     â”‚ String (unique)  â”‚ joao@exemplo.com  â”‚  â”‚
â”‚  â”‚ password  â”‚ String (hash)    â”‚ $2b$10$...       â”‚  â”‚
â”‚  â”‚ createdAt â”‚ String (ISO)     â”‚ 2025-10-15T12:... â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  Ãndices:                                               â”‚
â”‚  1. Primary Key (id) - para busca rÃ¡pida por ID         â”‚
â”‚  2. EmailIndex (email) - para login (busca por email)   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### S3 - Bucket `my-app-bucket`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Bucket: my-app-bucket                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Estrutura:                                             â”‚
â”‚                                                         â”‚
â”‚  my-app-bucket/                                         â”‚
â”‚  â”œâ”€ 550e8400-e29b-41d4.../         (userId 1)           â”‚
â”‚  â”‚  â”œâ”€ 1697384400000-foto.jpg                          â”‚
â”‚  â”‚  â”‚  â”œâ”€ Body: [binary data]                          â”‚
â”‚  â”‚  â”‚  â”œâ”€ ContentType: image/jpeg                      â”‚
â”‚  â”‚  â”‚  â””â”€ Metadata:                                     â”‚
â”‚  â”‚  â”‚     â”œâ”€ originalName: foto.jpg                     â”‚
â”‚  â”‚  â”‚     â””â”€ userId: 550e8400...                        â”‚
â”‚  â”‚  â”œâ”€ 1697384500000-documento.pdf                     â”‚
â”‚  â”‚  â””â”€ 1697384600000-video.mp4                         â”‚
â”‚  â”‚                                                      â”‚
â”‚  â”œâ”€ 661f9511-f3ac-52e5.../         (userId 2)           â”‚
â”‚  â”‚  â””â”€ 1697384700000-imagem.png                        â”‚
â”‚  â”‚                                                      â”‚
â”‚  â””â”€ 772g0622-g4bd-63f6.../         (userId 3)           â”‚
â”‚     â””â”€ 1697384800000-arquivo.txt                       â”‚
â”‚                                                         â”‚
â”‚  PadrÃ£o da Key:                                         â”‚
â”‚  {userId}/{timestamp}-{originalFilename}                â”‚
â”‚                                                         â”‚
â”‚  Exemplo:                                               â”‚
â”‚  550e8400-e29b-41d4-a716-446655440000/                  â”‚
â”‚    1697384400000-minha-foto.jpg                         â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Camadas de SeguranÃ§a

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SEGURANÃ‡A EM CAMADAS                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. AUTENTICAÃ‡ÃƒO (Quem Ã© vocÃª?)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ JWT Token                                    â”‚
   â”‚ â€¢ Secret do .env                               â”‚
   â”‚ â€¢ ExpiraÃ§Ã£o em 24h                             â”‚
   â”‚ â€¢ Armazenado no localStorage                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. AUTORIZAÃ‡ÃƒO (O que vocÃª pode fazer?)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ JwtAuthGuard em todas as rotas protegidas    â”‚
   â”‚ â€¢ ExtraÃ§Ã£o do userId do token                  â”‚
   â”‚ â€¢ VerificaÃ§Ã£o de propriedade dos arquivos      â”‚
   â”‚   (key.startsWith(userId/))                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. VALIDAÃ‡ÃƒO DE DADOS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ class-validator nos DTOs                     â”‚
   â”‚ â€¢ Email vÃ¡lido obrigatÃ³rio                     â”‚
   â”‚ â€¢ Senha mÃ­nima de 6 caracteres                 â”‚
   â”‚ â€¢ Nome obrigatÃ³rio                             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. CRIPTOGRAFIA
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Bcrypt para hash de senhas                   â”‚
   â”‚ â€¢ Salt rounds = 10                             â”‚
   â”‚ â€¢ Senha nunca armazenada em texto plano        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. ISOLAMENTO DE DADOS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Arquivos separados por usuÃ¡rio (S3)          â”‚
   â”‚ â€¢ VerificaÃ§Ã£o de propriedade antes de          â”‚
   â”‚   download/delete                              â”‚
   â”‚ â€¢ Retorna 403 Forbidden se tentar acessar      â”‚
   â”‚   arquivo de outro usuÃ¡rio                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. CORS
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Apenas http://localhost:3000 permitido       â”‚
   â”‚ â€¢ Credentials habilitado                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tecnologias e Suas FunÃ§Ãµes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        STACK                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  FRONTEND                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Next.js    â”‚ Framework React com SSR e routing    â”‚  â”‚
â”‚  â”‚ React      â”‚ UI Components                        â”‚  â”‚
â”‚  â”‚ TypeScript â”‚ Tipagem estÃ¡tica                     â”‚  â”‚
â”‚  â”‚ Axios      â”‚ HTTP Client                          â”‚  â”‚
â”‚  â”‚ CSS Module â”‚ Estilos isolados por componente      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  BACKEND                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ NestJS     â”‚ Framework Node.js estruturado        â”‚  â”‚
â”‚  â”‚ TypeScript â”‚ Tipagem estÃ¡tica                     â”‚  â”‚
â”‚  â”‚ Passport   â”‚ AutenticaÃ§Ã£o                         â”‚  â”‚
â”‚  â”‚ JWT        â”‚ Tokens stateless                     â”‚  â”‚
â”‚  â”‚ Bcrypt     â”‚ Hash de senhas                       â”‚  â”‚
â”‚  â”‚ Multer     â”‚ Upload de arquivos                   â”‚  â”‚
â”‚  â”‚ AWS SDK v3 â”‚ IntegraÃ§Ã£o com S3 e DynamoDB         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  INFRAESTRUTURA                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ LocalStack â”‚ EmulaÃ§Ã£o local da AWS                â”‚  â”‚
â”‚  â”‚ Docker     â”‚ ContainerizaÃ§Ã£o                      â”‚  â”‚
â”‚  â”‚ S3         â”‚ Armazenamento de objetos             â”‚  â”‚
â”‚  â”‚ DynamoDB   â”‚ Banco NoSQL                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ComparaÃ§Ã£o: Desenvolvimento vs ProduÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DESENVOLVIMENTO                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ LocalStack (emulaÃ§Ã£o AWS)                                 â”‚
â”‚ â€¢ Endpoint: http://localhost:4566                           â”‚
â”‚ â€¢ Credenciais: test/test                                    â”‚
â”‚ â€¢ Dados armazenados localmente                              â”‚
â”‚ â€¢ Sem custo                                                 â”‚
â”‚ â€¢ RÃ¡pido para testes                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â¬‡ï¸ MIGRAÃ‡ÃƒO

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRODUÃ‡ÃƒO (AWS)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ AWS Real                                                  â”‚
â”‚ â€¢ Endpoints regionais (ex: s3.us-east-1.amazonaws.com)      â”‚
â”‚ â€¢ IAM Roles e PolÃ­ticas                                     â”‚
â”‚ â€¢ Dados na nuvem AWS                                        â”‚
â”‚ â€¢ Custo baseado em uso                                      â”‚
â”‚ â€¢ Escalabilidade automÃ¡tica                                 â”‚
â”‚                                                             â”‚
â”‚ MUDANÃ‡AS NECESSÃRIAS:                                       â”‚
â”‚ 1. Remover AWS_ENDPOINT do .env                             â”‚
â”‚ 2. Configurar IAM credentials reais                         â”‚
â”‚ 3. Remover forcePathStyle do S3Client                       â”‚
â”‚ 4. Configurar bucket em regiÃ£o especÃ­fica                   â”‚
â”‚ 5. Configurar DynamoDB em regiÃ£o especÃ­fica                 â”‚
â”‚ 6. Habilitar HTTPS                                          â”‚
â”‚ 7. Configurar domÃ­nio e DNS                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Logs e Monitoramento

### Backend inicia

```
ğŸš€ Backend rodando na porta 3001
âœ… Bucket my-app-bucket jÃ¡ existe  (ou criado com sucesso)
âœ… Tabela users jÃ¡ existe          (ou criada com sucesso)
```

### OperaÃ§Ãµes de AutenticaÃ§Ã£o

```
[AuthService] Novo usuÃ¡rio registrado: email@exemplo.com
[AuthService] Login bem-sucedido: email@exemplo.com
```

### OperaÃ§Ãµes de Arquivos

```
[S3Service] Upload: userId/1697384400000-foto.jpg
[S3Service] Download: userId/1697384400000-foto.jpg
[S3Service] Delete: userId/1697384400000-foto.jpg
[S3Service] Listando arquivos para userId: 550e8400...
```

### Erros Comuns

```
âŒ LocalStack nÃ£o estÃ¡ rodando
   â†’ SoluÃ§Ã£o: docker-compose up -d

âŒ Erro ao criar bucket: BucketAlreadyExists
   â†’ Normal: bucket jÃ¡ existe

âŒ Erro ao criar tabela: ResourceInUseException
   â†’ Normal: tabela jÃ¡ existe

âŒ UnauthorizedException: JWT malformed
   â†’ SoluÃ§Ã£o: Limpar localStorage e fazer login novamente

âŒ ForbiddenException: VocÃª nÃ£o tem permissÃ£o...
   â†’ Tentativa de acessar arquivo de outro usuÃ¡rio
```

---

Pronto! Agora vocÃª tem uma visÃ£o completa da arquitetura do sistema! ğŸ‰
